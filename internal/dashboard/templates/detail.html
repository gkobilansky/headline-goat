<a href="/dashboard" class="back-link">← Back to tests</a>

<div class="test-header">
  <div>
    <h1>{{.Test.Name}}</h1>
    <p class="test-info">
      Created {{.Test.CreatedAt}}
      {{if .Test.Goal}}&middot; Goal: {{.Test.Goal}}{{end}}
    </p>
  </div>
  <div>
    <span class="state state-{{.Test.State}}">{{.Test.State}}</span>
  </div>
</div>

<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
  <p class="section-title" style="margin-bottom: 0;">Results</p>
  {{if .Result.Confident}}
  <span class="confidence-badge confident">{{printf "%.1f" .ConfidencePercent}}% confident</span>
  {{else if gt .ConfidencePercent 50.0}}
  <span class="confidence-badge">{{printf "%.1f" .ConfidencePercent}}% confident</span>
  {{end}}
</div>

<div class="variants">
  {{range .Result.Variants}}
  <div class="variant {{if eq .Index $.Result.LeadingVariant}}leading{{end}}">
    <div class="variant-header">
      <span class="variant-name">"{{.Name}}"</span>
      {{if eq .Index $.Result.LeadingVariant}}
      <span class="leading-badge">← LEADING</span>
      {{end}}
    </div>
    <div class="variant-stats">
      <span><span class="stat-value">{{.Views}}</span> views</span>
      <span><span class="stat-value">{{.Conversions}}</span> conversions</span>
      <span><span class="stat-value">{{printf "%.2f" .RatePercent}}%</span> rate</span>
    </div>
    <div class="progress-bar">
      <div class="progress-fill" style="width: {{.RatePercent}}%"></div>
    </div>
    <div class="confidence-interval">
      95% CI: [{{printf "%.1f" .CILowerPercent}}%, {{printf "%.1f" .CIUpperPercent}}%]
    </div>
  </div>
  {{end}}
</div>

{{if .Result.Confident}}
<p style="margin-top: 1.5rem; color: var(--success);">
  ✓ "{{.LeadingVariantName}}" is the winner with {{printf "%.1f" .ConfidencePercent}}% confidence
</p>
{{else if gt .ConfidencePercent 90.0}}
<p style="margin-top: 1.5rem; color: var(--text-muted);">
  "{{.LeadingVariantName}}" is leading but not yet statistically significant ({{printf "%.1f" .ConfidencePercent}}%)
</p>
{{else}}
<p style="margin-top: 1.5rem; color: var(--text-muted);">
  Not enough data to determine a winner
</p>
{{end}}
